{"id":"5db16a50aad7e300012622e0","name":"mpesa_dev_confirmation #callback #mpesa","slug":"c2b-confirmation","listen_port":0,"protocol":"","enable_proxy_protocol":false,"api_id":"mpesa_dev_confirmation","org_id":"5db0a5500ecce0000117e624","use_keyless":false,"use_oauth2":false,"use_openid":false,"openid_options":{"providers":[],"segregate_by_client":false},"oauth_meta":{"allowed_access_types":[],"allowed_authorize_types":[],"auth_login_redirect":""},"auth":{"use_param":true,"param_name":"auth-token","use_cookie":false,"cookie_name":"","auth_header_name":"Authorization","use_certificate":false,"validate_signature":false,"signature":{"algorithm":"","header":"","secret":"","allowed_clock_skew":0,"error_code":0,"error_message":""}},"use_basic_auth":false,"basic_auth":{"disable_caching":false,"cache_ttl":0,"extract_from_body":false,"body_user_regexp":"","body_password_regexp":""},"use_mutual_tls_auth":false,"client_certificates":[],"upstream_certificates":{},"pinned_public_keys":{},"enable_jwt":false,"use_standard_auth":true,"use_go_plugin_auth":false,"enable_coprocess_auth":false,"jwt_signing_method":"","jwt_source":"","jwt_identity_base_field":"","jwt_client_base_field":"","jwt_policy_field_name":"","jwt_default_policies":[],"jwt_issued_at_validation_skew":0,"jwt_expires_at_validation_skew":0,"jwt_not_before_validation_skew":0,"jwt_skip_kid":false,"jwt_scope_to_policy_mapping":{},"jwt_scope_claim_name":"","notifications":{"shared_secret":"","oauth_on_keychange_url":""},"enable_signature_checking":false,"hmac_allowed_clock_skew":-1,"hmac_allowed_algorithms":[],"request_signing":{"is_enabled":false,"secret":"","key_id":"","algorithm":""},"base_identity_provided_by":"","definition":{"location":"header","key":"x-api-version","strip_path":false},"version_data":{"not_versioned":true,"default_version":"","versions":{"Default":{"name":"Default","expires":"","paths":{"ignored":[],"white_list":[],"black_list":[]},"use_extended_paths":true,"extended_paths":{"transform":[{"template_data":{"input_type":"xml","template_mode":"blob","enable_session":false,"template_source":"e3stICRycXN0cGFyYW1zIDo9IC5FbnZlbG9wZS5Cb2R5LkMyQlBheW1lbnRDb25maXJtYXRpb25SZXF1ZXN0IC19fQp7ey0gJGt5YyA6PSAgJHJxc3RwYXJhbXMuS1lDSW5mbyAtfX0KewogICJkYXRhIjogewogICAgInR5cGUiOiAicGF5aW5zIiwKICAgICJhdHRyaWJ1dGVzIjogewogICAgICAidHhuX2lkIjogInt7LSAkcnFzdHBhcmFtcy5UcmFuc0lEIC19fSIsCiAgICAgIHt7LSBpZiAkcnFzdHBhcmFtcy5NU0lTRE4gfX0KICAgICAgInNlbmRlcl9ubyI6ICJ7ey0gJHJxc3RwYXJhbXMuTVNJU0ROIC19fSIsCiAgICAgICJzZW5kZXJfbmFtZSI6ICJ7e3JhbmdlICRrZXksICR2YWx1ZSA6PSAka3ljfX17e2lmIG5lICRrZXkgMCB9fXt7IiAifX17e2VuZH19e3sgJHZhbHVlLktZQ1ZhbHVlIH19e3tlbmR9fSIsCiAgICAgICJzZW5kZXJfdHlwZSI6ICJtc2lzZG4iLAogICAgICB7eyBlbHNlIC19fQogICAgICB7e2lmICAkcnFzdHBhcmFtcy5TaG9ydENvZGUgLX19InNlbmRlcl9ubyI6ICJ7ey0gJHJxc3RwYXJhbXMuU2hvcnRDb2RlIC19fSIsIHt7ZW5kfX0KICAgICAgInNlbmRlcl9uYW1lIjogInt7LSAka3ljLktZQ1ZhbHVlIC19fSIsCiAgICAgICJzZW5kZXJfdHlwZSI6ICJzaG9ydGNvZGUiLAogICAgICB7e2VuZCAtfX0KICAgICAgImFtb3VudCI6IHt7ICRycXN0cGFyYW1zLlRyYW5zQW1vdW50IC19fSwKICAgICAge3tpZiAkcnFzdHBhcmFtcy5UcmFuc1RpbWV9fSJ0eG5fY3JlYXRlZF9hdCI6ICJ7ey0gJHJxc3RwYXJhbXMuVHJhbnNUaW1lIC19fSIsCiAgICAgIHt7ZW5kIC19fQogICAgICB7e2lmICRycXN0cGFyYW1zLkJ1c2luZXNzU2hvcnRDb2RlfX0ic2hvcnRfY29kZSI6ICJ7ey0gJHJxc3RwYXJhbXMuQnVzaW5lc3NTaG9ydENvZGUgLX19IiwKICAgICAge3tlbmQgLX19CiAgICAgIHt7aWYgICRycXN0cGFyYW1zLkJpbGxSZWZOdW1iZXJ9fSJyZWZlcmVuY2UiOiAie3stICRycXN0cGFyYW1zLkJpbGxSZWZOdW1iZXIgLX19IiwKICAgICAge3tlbmQgLX19CiAgICAgIHt7aWYgJHJxc3RwYXJhbXMuT3JnQWNjb3VudEJhbGFuY2V9fSJiYWxhbmNlX3dvcmtpbmdfYWMiOiB7eyAkcnFzdHBhcmFtcy5PcmdBY2NvdW50QmFsYW5jZSAtfX0sCiAgICAgIHt7ZW5kIC19fQogICAgICAiY2F0ZWdvcnkiOiB7ey0gaWYgZXEgJHJxc3RwYXJhbXMuVHJhbnNUeXBlICJPcmdhbml6YXRpb24gVG8gT3JnYW5pemF0aW9uIFRyYW5zZmVyIiAtfX0gIkIyQiIKICAgICAge3stIGVsc2UgaWYgZXEgJHJxc3RwYXJhbXMuVHJhbnNUeXBlICJDdXN0b21lciBNZXJjaGFudCBQYXltZW50IiAtfX0gIkJ1eUdvb2RzIgogICAgICB7ey0gZWxzZSBpZiBlcSAkcnFzdHBhcmFtcy5UcmFuc1R5cGUgIlBheSBCaWxsIiAtfX0gIlBheWJpbGwiCiAgICAgIHt7LSBlbmQgfX0KICAgIH0KICB9Cn0="},"path":"/","method":"POST"}],"transform_response":[{"template_data":{"input_type":"json","template_mode":"blob","enable_session":false,"template_source":"PHNvYXBlbnY6RW52ZWxvcGUgeG1sbnM6c29hcGVudj0iaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9lbnZlbG9wZS8iIAogICAgeG1sbnM6YzJiPSJodHRwOi8vY3BzLmh1YXdlaS5jb20vY3BzaW50ZXJmYWNlL2MyYnBheW1lbnQiPgogICAgPHNvYXBlbnY6SGVhZGVyLz4KICAgIDxzb2FwZW52OkJvZHk+CiAgICAgICAgPGMyYjpDMkJQYXltZW50Q29uZmlybWF0aW9uUmVzdWx0PkMyQiBQYXltZW50IFRyYW5zYWN0aW9uIHJlc3VsdCByZWNlaXZlZDwvYzJiOkMyQlBheW1lbnRDb25maXJtYXRpb25SZXN1bHQ+CiAgICA8L3NvYXBlbnY6Qm9keT4KPC9zb2FwZW52OkVudmVsb3BlPg=="},"path":"/","method":"POST"}],"transform_headers":[{"delete_headers":["content-type"],"add_headers":{"content-type":"application/vnd.api+json"},"path":"/","method":"POST","act_on":false}],"transform_response_headers":[{"delete_headers":["content-type"],"add_headers":{"content-type":"text/xml"},"path":"/","method":"POST","act_on":false}],"url_rewrites":[{"path":"/","method":"POST","match_pattern":"/confirmation","rewrite_to":"","triggers":[{"on":"any","options":{"header_matches":{"x-confirmation-url":{"match_rx":"--","reverse":true}},"query_val_matches":{},"path_part_matches":{},"session_meta_matches":{},"request_context_matches":{},"payload_matches":{"match_rx":"","reverse":false}},"rewrite_to":"$tyk_context.headers_X_Confirmation_Url"}]}]},"global_headers":{},"global_headers_remove":["soapaction"],"global_size_limit":0,"override_target":""}}},"uptime_tests":{"check_list":[],"config":{"expire_utime_after":0,"service_discovery":{"use_discovery_service":false,"query_endpoint":"","use_nested_query":false,"parent_data_path":"","data_path":"","port_data_path":"","target_path":"","use_target_list":false,"cache_timeout":60,"endpoint_returns_list":false},"recheck_wait":0}},"proxy":{"preserve_host_header":false,"listen_path":"/app/callback/confirmation","target_url":"http://localhost#never-hits-this","disable_strip_slash":false,"strip_listen_path":false,"enable_load_balancing":false,"target_list":[],"check_host_against_uptime_tests":false,"service_discovery":{"use_discovery_service":false,"query_endpoint":"","use_nested_query":false,"parent_data_path":"","data_path":"","port_data_path":"","target_path":"","use_target_list":false,"cache_timeout":0,"endpoint_returns_list":false},"transport":{"ssl_insecure_skip_verify":false,"ssl_ciphers":[],"ssl_min_version":0,"proxy_url":""}},"disable_rate_limit":false,"disable_quota":false,"custom_middleware":{"pre":[{"name":"pre_c2b_async","path":"/etc/tyk-gateway/middleware/mpesa/pre_c2b_async.js","require_session":false,"raw_body_only":false}],"post":[],"post_key_auth":[],"auth_check":{"name":"","path":"","require_session":false,"raw_body_only":false},"response":[],"driver":"","id_extractor":{"extract_from":"","extract_with":"","extractor_config":{}}},"custom_middleware_bundle":"","cache_options":{"cache_timeout":60,"enable_cache":true,"cache_all_safe_requests":false,"cache_response_codes":[],"enable_upstream_cache_control":false,"cache_control_ttl_header":""},"session_lifetime":0,"active":true,"internal":false,"auth_provider":{"name":"","storage_engine":"","meta":{}},"session_provider":{"name":"","storage_engine":"","meta":{}},"event_handlers":{"events":{}},"enable_batch_request_support":false,"enable_ip_whitelisting":false,"allowed_ips":[],"enable_ip_blacklisting":false,"blacklisted_ips":[],"dont_set_quota_on_create":false,"expire_analytics_after":0,"response_processors":[{"name":"header_injector","options":{}},{"name":"response_body_transform","options":{}}],"CORS":{"enable":false,"allowed_origins":[],"allowed_methods":[],"allowed_headers":[],"exposed_headers":[],"allow_credentials":false,"max_age":24,"options_passthrough":false,"debug":false},"domain":"","certificates":[],"do_not_track":false,"tags":[],"enable_context_vars":true,"config_data":{"app_ids":{"1002":{"headers":{"Accept":"application/vnd.api+json","Content-Type":"application/vnd.api+json"},"name":"Responses test app","urls":{"balance_check":{"method":"POST","url":"https://dev.url:port/query"},"confirmation":{"method":"PATCH","url":"http://www.mocky.io/v2/5d8b72d43500002de7d47017"},"payout":{"method":"PATCH","url":"http://www.mocky.io/v2/5d8b7284350000e004d47010"},"reversal":{"method":"PATCH","url":"https://dev.url:port/payins/reversals"},"timeout":{"method":"POST","url":"https://dev.url:port/timeout"},"transaction_status":{"method":"POST","url":"https://dev.url:port/query"},"validation":{"method":"POST","url":"http://www.mocky.io/v2/5d8b7284350000e004d47010"}}},"25":{"name":"testng601","short_code":601000,"urls":{"confirmation":{"url":"https://confirmation-601000.free.beeceptor.com"},"validation":{"url":"https://validation-601000.free.beeceptor.com"}}},"330":{"name":"test107038","short_code":107038,"urls":{"confirmation":{"url":"https://confirmation-601000.free.beeceptor.com"},"validation":{"url":"https://validation-601000.free.beeceptor.com"}}},"521":{"name":"test601000","urls":{"confirmation":{"url":"https://confirmation-601000.free.beeceptor.com"},"validation":{"url":"https://validation-601000.free.beeceptor.com"}}},"536":{"name":"testng601","short_code":601000,"urls":{"confirmation":{"url":"https://confirmation-601000.free.beeceptor.com"},"validation":{"url":"https://validation-601000.free.beeceptor.com"}}},"54":{"name":"test107038","short_code":107038,"urls":{"confirmation":{"url":"https://confirmation-601000.free.beeceptor.com"},"validation":{"url":"https://validation-601000.free.beeceptor.com"}}},"57":{"headers":{"Accept":"application/vnd.api+json","Content-Type":"application/vnd.api+json"},"name":"error app","urls":{"payout":{"method":"PATCH","url":"https://www.mocky.io/v2/5d853c333200002a0007b1e9"},"validation":{"method":"POST","url":"http://www.mocky.io/v2/5d86370a320000347507b384"}}},"595":{"name":"testc2bapp","urls":{"confirmation":{"url":"https://confirmation-601000.free.beeceptor.com"},"validation":{"url":"https://validation-601000.free.beeceptor.com"}}},"74":{"headers":{"Accept":"application/vnd.api+json","Content-Type":"application/vnd.api+json"},"name":"Test App","urls":{"balance_check":{"method":"POST","url":"https://dev.url:port/query"},"confirmation":{"method":"PATCH","url":"http://www.mocky.io/v2/5d862f91320000b55707b378"},"payout":{"method":"PATCH","url":"http://www.mocky.io/v2/5d862d23320000347507b370"},"reversal":{"method":"PATCH","url":"https://dev.url:port/payins/reversals"},"timeout":{"method":"POST","url":"https://dev.url:port/timeout"},"transaction_status":{"method":"POST","url":"https://dev.url:port/query"},"validation":{"method":"POST","url":"http://www.mocky.io/v2/5d862f91320000b55707b378"}}},"76":{"name":"testng601","short_code":601000,"urls":{"confirmation":{"url":"https://confirmation-601000.free.beeceptor.com"},"validation":{"url":"https://validation-601000.free.beeceptor.com"}}},"793":{"name":"testng601","short_code":601000,"urls":{"confirmation":{"url":"https://confirmation-601000.free.beeceptor.com"},"validation":{"url":"https://validation-601000.free.beeceptor.com"}}},"941":{"name":"test107038","short_code":107038,"urls":{"confirmation":{"url":"https://confirmation-601000.free.beeceptor.com"},"validation":{"url":"https://validation-601000.free.beeceptor.com"}}},"982":{"name":"testc2bapp","urls":{"confirmation":{"url":"https://confirmation-601000.free.beeceptor.com"},"validation":{"url":"https://validation-601000.free.beeceptor.com"}}},"642":{"name":"mel-test","short_code":601000,"urls":{"validation":{"url":"https://validation-601000.free.beeceptor.com"},"confirmation":{"url":"https://confirmation-601000.free.beeceptor.com"}}}}},"tag_headers":["x-app-id","x-trxn"],"global_rate_limit":{"rate":0,"per":0},"strip_auth_data":true}